"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[878],{4878:(z,m,u)=>{u.r(m),u.d(m,{StoriesModule:()=>F});var a=u(8583),p=u(8418),g=u(6766),t=u(3018),l=u(6368),_=u(6241),c=u(665),y=u(8295),d=u(2290);function f(n,r){if(1&n&&(t.TgZ(0,"h5",11),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("",t.Dn7(2,1,e.story.name,0,30),"...")}}function x(n,r){if(1&n&&(t.TgZ(0,"h5",11),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.story.name)}}function Z(n,r){if(1&n&&(t.TgZ(0,"p",12),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("",t.Dn7(2,1,e.story.description,0,90),"...")}}function S(n,r){if(1&n&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.story.description)}}function C(n,r){if(1&n&&t.YNc(0,S,2,1,"p",13),2&n){const e=t.oxw();t.Q6J("ngIf",e.story.description.length<=90)}}const h=function(n){return[n]};function T(n,r){if(1&n&&(t.TgZ(0,"a",14),t._uU(1,"\u10e0\u10d4\u10d3\u10d0\u10e5\u10e2\u10d8\u10e0\u10d4\u10d1\u10d0"),t.qZA()),2&n){const e=t.oxw();t.Q6J("routerLink",t.VKq(1,h,"/stories/update/"+e.story.id))}}function E(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDelete()}),t._uU(1,"\u10ec\u10d0\u10e8\u10da\u10d0"),t.qZA()}}const A=function(n){return{height:n}};let b=(()=>{class n{constructor(e,o,s){this.accountService=e,this.storyService=o,this.toastr=s,this.storyDeletedEmitter=new t.vpe}ngOnInit(){}onDelete(){this.storyService.deleteStory(this.story.name).subscribe(()=>{this.storyDeletedEmitter.emit(),this.toastr.success("\u10db\u10dd\u10d7\u10ee\u10e0\u10dd\u10d1\u10d0 \u10ec\u10d0\u10d8\u10e8\u10d0\u10da\u10d0!")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.B),t.Y36(l.I),t.Y36(d._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stories-item"]],inputs:{story:"story"},outputs:{storyDeletedEmitter:"storyDeletedEmitter"},decls:21,vars:23,consts:[["data-aos","zoom-in",1,"card","text-center","custom-card-class-selector",2,"width","401px",3,"ngStyle"],[1,"card-header"],[1,"card-body"],["class","card-title",4,"ngIf","ngIfElse"],["shorter_h",""],["class","card-text",4,"ngIf","ngIfElse"],["shorter_p",""],[1,"btn","btn-primary",3,"routerLink"],["class","btn btn-warning m-2",3,"routerLink",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"card-footer","text-muted"],[1,"card-title"],[1,"card-text"],["class","card-text",4,"ngIf"],[1,"btn","btn-warning","m-2",3,"routerLink"],[1,"btn","btn-danger",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"div",1),t._uU(3),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,f,3,5,"h5",3),t.YNc(6,x,2,1,"ng-template",null,4,t.W1O),t.YNc(8,Z,3,5,"p",5),t.YNc(9,C,1,1,"ng-template",null,6,t.W1O),t.TgZ(11,"div"),t.TgZ(12,"a",7),t._uU(13,"\u10ec\u10d0\u10d9\u10d8\u10d7\u10ee\u10d5\u10d0"),t.qZA(),t.YNc(14,T,2,3,"a",8),t.ALo(15,"async"),t.YNc(16,E,2,0,"a",9),t.ALo(17,"async"),t.qZA(),t.qZA(),t.TgZ(18,"div",10),t._uU(19),t.ALo(20,"date"),t.qZA(),t.qZA()),2&e){const s=t.MAs(7),i=t.MAs(10);t.Q6J("ngStyle",t.VKq(19,A,t.lcZ(1,10,o.accountService.currentAdmin$)?"270px":"250px")),t.xp6(3),t.hij(" ",o.story.author," "),t.xp6(2),t.Q6J("ngIf",o.story.name.length>30)("ngIfElse",s),t.xp6(3),t.Q6J("ngIf",o.story.description.length>90)("ngIfElse",i),t.xp6(4),t.Q6J("routerLink",t.VKq(21,h,"/stories/"+o.story.id)),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,12,o.accountService.currentAdmin$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(17,14,o.accountService.currentAdmin$)),t.xp6(3),t.hij(" ",t.xi3(20,16,o.story.publishDate,"shortDate")," ")}},directives:[a.PC,a.O5,p.yS],pipes:[a.Ov,a.uU,a.OU],styles:[".activated[_ngcontent-%COMP%]{height:245px!important}@media only screen and (max-width: 600px){.custom-card-class-selector[_ngcontent-%COMP%]{width:100%!important;height:auto!important}.custom-btn-group[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;flex-direction:column;justify-content:space-between!important}}"]}),n})();const v=["search"];function M(n,r){if(1&n&&(t.TgZ(0,"option",15),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function q(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-stories-item",16),t.NdJ("storyDeletedEmitter",function(){return t.CHM(e),t.oxw().onDeleted()}),t.qZA()}2&n&&t.Q6J("story",r.$implicit)}let I=(()=>{class n{constructor(e){this.storyService=e,this.stories=[],this.storyParams=new g.b,this.totalCount=0,this.sortOptions=[{name:"\u10d0\u10dc\u10d1\u10d0\u10dc\u10d8\u10e1 \u10db\u10d8\u10ee\u10d4\u10d3\u10d5\u10d8\u10d7",value:"name"},{name:"\u10d2\u10d0\u10db\u10dd\u10e5\u10d5\u10d4\u10e7\u10dc\u10d4\u10d1\u10d8\u10e1 \u10d7\u10d0\u10e0\u10d8\u10e6\u10d8(\u10d0\u10d3\u10e0\u10d4)",value:"dateAsc"},{name:"\u10d2\u10d0\u10db\u10dd\u10e5\u10d5\u10d4\u10e7\u10dc\u10d4\u10d1\u10d8\u10e1 \u10d7\u10d0\u10e0\u10d8\u10e6\u10d8(\u10d2\u10d5\u10d8\u10d0\u10dc)",value:"dateDesc"}]}ngOnInit(){this.getStories()}getStories(){this.storyService.getStories(this.storyParams).subscribe(e=>{this.stories=e.data,this.totalCount=e.count,this.storyParams.pageSize=e.pageSize,this.storyParams.pageNumber=e.pageIndex})}changeSort(e){this.storyParams.sort=e.currentTarget.value,this.getStories()}onPageChanged(e){this.storyParams.pageNumber!==e&&(this.storyParams.pageNumber=e,this.getStories())}onSearch(){this.storyParams.search=this.searchInput.nativeElement.value,this.storyParams.pageNumber=1,this.getStories()}onReset(){this.searchInput.nativeElement.value="",this.storyParams=new g.b,this.getStories()}onDeleted(){this.getStories()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.I))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stories"]],viewQuery:function(e,o){if(1&e&&t.Gf(v,5),2&e){let s;t.iGM(s=t.CRH())&&(o.searchInput=s.first)}},decls:20,vars:4,consts:[[1,"container","custom-container",2,"margin-top","95px"],[1,"text-primary"],[1,"mt-4"],[1,"d-flex","align-items-center","justify-content-between","custom-filter-container"],[1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"form-inline","d-flex",2,"justify-content","flex-end"],["type","text","placeholder","\u10e1\u10d0\u10eb\u10d8\u10d4\u10d1\u10dd \u10e1\u10d8\u10e2\u10e7\u10d5\u10d0",1,"form-control",2,"width","50%",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","mx-2","custom-button-modification",3,"click"],[1,"btn","btn-success",3,"click"],[1,"mt-3","d-flex","align-items-center","justify-content-start","flex-wrap","custom-list-container"],["class","m-3",3,"story","storyDeletedEmitter",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],[3,"totalCount","pageSize","pageChange"],[3,"value"],[1,"m-3",3,"story","storyDeletedEmitter"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"h1",1),t._uU(2,"\u10db\u10dd\u10d7\u10ee\u10e0\u10dd\u10d1\u10d4\u10d1\u10d8"),t.qZA(),t.TgZ(3,"section",2),t.TgZ(4,"article",3),t.ynx(5),t.TgZ(6,"div"),t.TgZ(7,"select",4),t.NdJ("change",function(i){return o.changeSort(i)}),t.YNc(8,M,2,2,"option",5),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"input",7,8),t.NdJ("keyup.enter",function(){return o.onSearch()}),t.qZA(),t.TgZ(12,"button",9),t.NdJ("click",function(){return o.onSearch()}),t._uU(13,"\u10eb\u10d8\u10d4\u10d1\u10d0"),t.qZA(),t.TgZ(14,"button",10),t.NdJ("click",function(){return o.onReset()}),t._uU(15,"\u10d2\u10d0\u10e1\u10e3\u10e4\u10d7\u10d0\u10d5\u10d4\u10d1\u10d0"),t.qZA(),t.qZA(),t.BQk(),t.qZA(),t.TgZ(16,"article",11),t.YNc(17,q,1,1,"app-stories-item",12),t.qZA(),t.TgZ(18,"article",13),t.TgZ(19,"app-pager",14),t.NdJ("pageChange",function(i){return o.onPageChanged(i)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngForOf",o.sortOptions),t.xp6(9),t.Q6J("ngForOf",o.stories),t.xp6(2),t.Q6J("totalCount",o.totalCount)("pageSize",o.storyParams.pageSize))},directives:[a.sg,_.P,c.YN,c.Kr,b],styles:["@media only screen and (max-width: 600px){.custom-filter-container[_ngcontent-%COMP%]{flex-direction:column-reverse;justify-content:flex-start;align-items:flex-start}.custom-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.custom-list-container[_ngcontent-%COMP%]{justify-content:center!important}div[_ngcontent-%COMP%]{margin:5px}}"]}),n})();var D=u(2523);const U=function(n){return[n]};function J(n,r){if(1&n&&(t.TgZ(0,"section",1),t.TgZ(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"h5",2),t._uU(4,"\u10ec\u10d8\u10dc\u10d0\u10e1\u10d8\u10e2\u10e7\u10d5\u10d0\u10dd\u10d1\u10d0:"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"h5",2),t._uU(8,"\u10dc\u10d0\u10ec\u10d0\u10e0\u10db\u10dd\u10d4\u10d1\u10d8:"),t.qZA(),t.TgZ(9,"p",3),t._uU(10),t.qZA(),t.TgZ(11,"p",3),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"a",4),t._uU(15),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.story.name),t.xp6(4),t.Oqu(e.story.description),t.xp6(4),t.Oqu(e.story.content),t.xp6(2),t.hij("\u10d2\u10d0\u10db\u10dd\u10e5\u10d5\u10d4\u10e7\u10dc\u10d4\u10d1\u10d8\u10e1 \u10d7\u10d0\u10e0\u10d8\u10e6\u10d8: ",t.xi3(13,6,e.story.publishDate,"dd/MM/YYYY"),""),t.xp6(2),t.Q6J("routerLink",t.VKq(9,U,"/authors/"+e.authorId)),t.xp6(1),t.hij("\u10d0\u10d5\u10e2\u10dd\u10e0\u10d8: ",e.story.author,"")}}function O(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"section",1),t.TgZ(1,"h2",2),t._uU(2),t.qZA(),t.TgZ(3,"form",3,4),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(5,"div",5),t.TgZ(6,"label",6),t._uU(7,"\u10e1\u10d0\u10ee\u10d4\u10da\u10d8"),t.qZA(),t.TgZ(8,"input",7),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().story.name=s}),t.qZA(),t.qZA(),t.TgZ(9,"div",8),t.TgZ(10,"label",6),t._uU(11,"\u10ec\u10d8\u10dc\u10d0\u10e1\u10d8\u10e2\u10e7\u10d5\u10d0\u10dd\u10d1\u10d0"),t.qZA(),t.TgZ(12,"textarea",9),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().story.description=s}),t.qZA(),t.qZA(),t.TgZ(13,"div",5),t.TgZ(14,"label",6),t._uU(15,"\u10e2\u10d4\u10e5\u10e1\u10e2\u10d8"),t.qZA(),t.TgZ(16,"textarea",10),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().story.content=s}),t.qZA(),t.qZA(),t.TgZ(17,"div",11),t.TgZ(18,"label",6),t._uU(19,"\u10d2\u10d0\u10db\u10dd\u10e5\u10d5\u10d4\u10e7\u10dc\u10d4\u10d1\u10d8\u10e1 \u10d7\u10d0\u10e0\u10d8\u10e6\u10d8"),t.qZA(),t.TgZ(20,"input",12),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().story.publishDate=s}),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"button",13),t._uU(23,"\u10e0\u10d4\u10d3\u10d0\u10e5\u10e2\u10d8\u10e0\u10d4\u10d1\u10d0"),t.qZA(),t.TgZ(24,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().reset()}),t._uU(25,"\u10d2\u10d0\u10e1\u10e3\u10e4\u10d7\u10d0\u10d5\u10d4\u10d1\u10d0"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(4),o=t.oxw();t.xp6(2),t.hij("\u10dc\u10d0\u10ec\u10d0\u10e0\u10db\u10dd\u10d4\u10d1\u10d8: ",o.baseName,""),t.xp6(6),t.Q6J("ngModel",o.story.name),t.xp6(4),t.Q6J("ngModel",o.story.description),t.xp6(4),t.Q6J("ngModel",o.story.content),t.xp6(4),t.Q6J("ngModel",o.story.publishDate),t.xp6(2),t.Q6J("disabled",e.invalid)}}const P=[{path:"",component:I},{path:":id",component:(()=>{class n{constructor(e,o,s){this.route=e,this.storyService=o,this.authorService=s}ngOnInit(){this.getStory()}getStory(){this.storyService.getStory(+this.route.snapshot.paramMap.get("id")).subscribe(e=>{this.story=e,this.authorService.getAuthorWithName(this.story.author).subscribe(o=>{this.authorId=o.id})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(l.I),t.Y36(D.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stories-detail"]],decls:1,vars:1,consts:[["class","container m-auto d-flex justify-content-center flex-column align-items-start","style","margin-top: 95px!important;",4,"ngIf"],[1,"container","m-auto","d-flex","justify-content-center","flex-column","align-items-start",2,"margin-top","95px!important"],[1,"mt-3"],[1,"mt-2"],[1,"mt-2",3,"routerLink"]],template:function(e,o){1&e&&t.YNc(0,J,16,11,"section",0),2&e&&t.Q6J("ngIf",o.story)},directives:[a.O5,p.yS],pipes:[a.uU],styles:["h2[_ngcontent-%COMP%]{font-size:34px}p[_ngcontent-%COMP%]{font-size:18px;width:80%}a[_ngcontent-%COMP%]{font-size:18px;text-decoration:none;color:#000;transition:.2s}a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#78c2ad}"]}),n})()},{path:"update/:id",component:(()=>{class n{constructor(e,o,s,i,k){this.storyService=e,this.route=o,this.toastr=s,this.router=i,this.authorService=k,this.story={name:"",description:"",content:"",publishDate:"",authorId:0}}ngOnInit(){this.getStory()}onSubmit(){this.storyService.updateStory(this.story,this.baseName).subscribe(()=>{this.router.navigate(["/stories/"+this.id]),this.toastr.success("\u10dc\u10d0\u10ec\u10d0\u10e0\u10db\u10dd\u10d4\u10d1\u10d8 \u10e0\u10d4\u10d3\u10d0\u10e5\u10e2\u10d8\u10e0\u10d4\u10d1\u10e3\u10da\u10d8\u10d0")})}reset(){this.story.name="",this.story.description="",this.story.content="",this.story.publishDate=""}getStory(){this.id=+this.route.snapshot.paramMap.get("id"),this.storyService.getStory(this.id).subscribe(e=>{this.story.name=e.name,this.story.description=e.description,this.story.content=e.content,this.story.publishDate=new Date(e.publishDate).toISOString().split("T")[0],this.baseName=this.story.name,this.authorService.getAuthorWithName(e.author).subscribe(o=>{this.story.authorId=o.id})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.I),t.Y36(p.gz),t.Y36(d._W),t.Y36(p.F0),t.Y36(D.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-story"]],decls:1,vars:1,consts:[["class","container","style","margin-top: 105px",4,"ngIf"],[1,"container",2,"margin-top","105px"],[1,"text-primary"],[1,"mt-3",3,"ngSubmit"],["authorAddForm","ngForm"],[1,"form-group"],[1,"form-label"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","my-3"],["name","description","cols","30","rows","5","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","content","id","","cols","30","rows","15",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","mt-3"],["type","date","name","publishDate","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-warning",3,"disabled"],["type","button",1,"btn","btn-info","mx-3",3,"click"]],template:function(e,o){1&e&&t.YNc(0,O,26,6,"section",0),2&e&&t.Q6J("ngIf",o.story&&o.baseName)},directives:[a.O5,c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On],styles:[""]}),n})(),canActivate:[u(8668).a]}];let Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez,p.Bz.forChild(P)],p.Bz]}),n})();var j=u(4466);let F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez,j.m,Q]]}),n})()}}]);