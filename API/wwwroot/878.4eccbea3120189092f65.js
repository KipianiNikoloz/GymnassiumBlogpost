"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[878],{4878:(j,l,s)=>{s.r(l),s.d(l,{StoriesModule:()=>P});var a=s(8583),p=s(8418),g=s(6766),t=s(3018),m=s(6368),y=s(6241),c=s(665),_=s(8295),d=s(2290);function f(n,r){if(1&n&&(t.TgZ(0,"p",9),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("",t.Dn7(2,1,e.story.description,1,90),"...")}}function S(n,r){if(1&n&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.story.description)}}const h=function(n){return[n]};function Z(n,r){if(1&n&&(t.TgZ(0,"a",10),t._uU(1,"\u10e0\u10d4\u10d3\u10d0\u10e5\u10e2\u10d8\u10e0\u10d4\u10d1\u10d0"),t.qZA()),2&n){const e=t.oxw();t.Q6J("routerLink",t.VKq(1,h,"/stories/update/"+e.story.id))}}function x(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"a",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDelete()}),t._uU(1,"\u10ec\u10d0\u10e8\u10da\u10d0"),t.qZA()}}const C=function(n){return{height:n}};let T=(()=>{class n{constructor(e,o,i){this.accountService=e,this.storyService=o,this.toastr=i,this.storyDeletedEmitter=new t.vpe}ngOnInit(){}onDelete(){this.storyService.deleteStory(this.story.name).subscribe(()=>{this.storyDeletedEmitter.emit(),this.toastr.success("\u10db\u10dd\u10d7\u10ee\u10e0\u10dd\u10d1\u10d0 \u10ec\u10d0\u10d8\u10e8\u10d0\u10da\u10d0!")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.B),t.Y36(m.I),t.Y36(d._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stories-item"]],inputs:{story:"story"},outputs:{storyDeletedEmitter:"storyDeletedEmitter"},decls:19,vars:22,consts:[["data-aos","zoom-in",1,"card","text-center","custom-card-class-selector",2,"width","401px",3,"ngStyle"],[1,"card-header"],[1,"card-body"],[1,"card-title"],["class","card-text",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],["class","btn btn-warning m-2",3,"routerLink",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"card-footer","text-muted"],[1,"card-text"],[1,"btn","btn-warning","m-2",3,"routerLink"],[1,"btn","btn-danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"div",1),t._uU(3),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"h5",3),t._uU(6),t.qZA(),t.YNc(7,f,3,5,"p",4),t.YNc(8,S,2,1,"p",4),t.TgZ(9,"div"),t.TgZ(10,"a",5),t._uU(11,"\u10ec\u10d0\u10d9\u10d8\u10d7\u10ee\u10d5\u10d0"),t.qZA(),t.YNc(12,Z,2,3,"a",6),t.ALo(13,"async"),t.YNc(14,x,2,0,"a",7),t.ALo(15,"async"),t.qZA(),t.qZA(),t.TgZ(16,"div",8),t._uU(17),t.ALo(18,"date"),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngStyle",t.VKq(18,C,t.lcZ(1,9,o.accountService.currentAdmin$)?"270px":"250px")),t.xp6(3),t.hij(" ",o.story.author," "),t.xp6(3),t.Oqu(o.story.name),t.xp6(1),t.Q6J("ngIf",o.story.description.length>90),t.xp6(1),t.Q6J("ngIf",o.story.description.length<=90),t.xp6(2),t.Q6J("routerLink",t.VKq(20,h,"/stories/"+o.story.id)),t.xp6(2),t.Q6J("ngIf",t.lcZ(13,11,o.accountService.currentAdmin$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,13,o.accountService.currentAdmin$)),t.xp6(3),t.hij(" ",t.xi3(18,15,o.story.publishDate,"shortDate")," "))},directives:[a.PC,a.O5,p.yS],pipes:[a.Ov,a.uU,a.OU],styles:[".activated[_ngcontent-%COMP%]{height:245px!important}@media only screen and (max-width: 600px){.custom-card-class-selector[_ngcontent-%COMP%]{width:100%!important;height:auto!important}.custom-btn-group[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;flex-direction:column;justify-content:space-between!important}}"]}),n})();const A=["search"];function b(n,r){if(1&n&&(t.TgZ(0,"option",15),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function v(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-stories-item",16),t.NdJ("storyDeletedEmitter",function(){return t.CHM(e),t.oxw().onDeleted()}),t.qZA()}2&n&&t.Q6J("story",r.$implicit)}let E=(()=>{class n{constructor(e){this.storyService=e,this.stories=[],this.storyParams=new g.b,this.totalCount=0,this.sortOptions=[{name:"\u10d0\u10dc\u10d1\u10d0\u10dc\u10d8\u10e1 \u10db\u10d8\u10ee\u10d4\u10d3\u10d5\u10d8\u10d7",value:"name"},{name:"\u10d2\u10d0\u10db\u10dd\u10e5\u10d5\u10d4\u10e7\u10dc\u10d4\u10d1\u10d8\u10e1 \u10d7\u10d0\u10e0\u10d8\u10e6\u10d8(\u10d0\u10d3\u10e0\u10d4)",value:"dateAsc"},{name:"\u10d2\u10d0\u10db\u10dd\u10e5\u10d5\u10d4\u10e7\u10dc\u10d4\u10d1\u10d8\u10e1 \u10d7\u10d0\u10e0\u10d8\u10e6\u10d8(\u10d2\u10d5\u10d8\u10d0\u10dc)",value:"dateDesc"}]}ngOnInit(){this.getStories()}getStories(){this.storyService.getStories(this.storyParams).subscribe(e=>{this.stories=e.data,this.totalCount=e.count,this.storyParams.pageSize=e.pageSize,this.storyParams.pageNumber=e.pageIndex})}changeSort(e){this.storyParams.sort=e.currentTarget.value,this.getStories()}onPageChanged(e){this.storyParams.pageNumber!==e&&(this.storyParams.pageNumber=e,this.getStories())}onSearch(){this.storyParams.search=this.searchInput.nativeElement.value,this.storyParams.pageNumber=1,this.getStories()}onReset(){this.searchInput.nativeElement.value="",this.storyParams=new g.b,this.getStories()}onDeleted(){this.getStories()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.I))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stories"]],viewQuery:function(e,o){if(1&e&&t.Gf(A,5),2&e){let i;t.iGM(i=t.CRH())&&(o.searchInput=i.first)}},decls:20,vars:4,consts:[[1,"container","custom-container",2,"margin-top","95px"],[1,"text-primary"],[1,"mt-4"],[1,"d-flex","align-items-center","justify-content-between","custom-filter-container"],[1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"form-inline","d-flex",2,"justify-content","flex-end"],["type","text","placeholder","\u10e1\u10d0\u10eb\u10d8\u10d4\u10d1\u10dd \u10e1\u10d8\u10e2\u10e7\u10d5\u10d0",1,"form-control",2,"width","50%",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","mx-2","custom-button-modification",3,"click"],[1,"btn","btn-success",3,"click"],[1,"mt-3","d-flex","align-items-center","justify-content-start","flex-wrap","custom-list-container"],["class","m-3",3,"story","storyDeletedEmitter",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],[3,"totalCount","pageSize","pageChange"],[3,"value"],[1,"m-3",3,"story","storyDeletedEmitter"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"h1",1),t._uU(2,"\u10db\u10dd\u10d7\u10ee\u10e0\u10dd\u10d1\u10d4\u10d1\u10d8"),t.qZA(),t.TgZ(3,"section",2),t.TgZ(4,"article",3),t.ynx(5),t.TgZ(6,"div"),t.TgZ(7,"select",4),t.NdJ("change",function(u){return o.changeSort(u)}),t.YNc(8,b,2,2,"option",5),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"input",7,8),t.NdJ("keyup.enter",function(){return o.onSearch()}),t.qZA(),t.TgZ(12,"button",9),t.NdJ("click",function(){return o.onSearch()}),t._uU(13,"\u10eb\u10d8\u10d4\u10d1\u10d0"),t.qZA(),t.TgZ(14,"button",10),t.NdJ("click",function(){return o.onReset()}),t._uU(15,"\u10d2\u10d0\u10e1\u10e3\u10e4\u10d7\u10d0\u10d5\u10d4\u10d1\u10d0"),t.qZA(),t.qZA(),t.BQk(),t.qZA(),t.TgZ(16,"article",11),t.YNc(17,v,1,1,"app-stories-item",12),t.qZA(),t.TgZ(18,"article",13),t.TgZ(19,"app-pager",14),t.NdJ("pageChange",function(u){return o.onPageChanged(u)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngForOf",o.sortOptions),t.xp6(9),t.Q6J("ngForOf",o.stories),t.xp6(2),t.Q6J("totalCount",o.totalCount)("pageSize",o.storyParams.pageSize))},directives:[a.sg,y.P,c.YN,c.Kr,T],styles:["@media only screen and (max-width: 600px){.custom-filter-container[_ngcontent-%COMP%]{flex-direction:column-reverse;justify-content:flex-start;align-items:flex-start}.custom-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.custom-list-container[_ngcontent-%COMP%]{justify-content:center!important}div[_ngcontent-%COMP%]{margin:5px}}"]}),n})();var D=s(2523);const M=function(n){return[n]};function q(n,r){if(1&n&&(t.TgZ(0,"section",1),t.TgZ(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"p",2),t._uU(4),t.qZA(),t.TgZ(5,"p",2),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"a",3),t._uU(9),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.story.name),t.xp6(2),t.Oqu(e.story.content),t.xp6(2),t.hij("\u10d2\u10d0\u10db\u10dd\u10e5\u10d5\u10d4\u10e7\u10dc\u10d4\u10d1\u10d8\u10e1 \u10d7\u10d0\u10e0\u10d8\u10e6\u10d8: ",t.xi3(7,5,e.story.publishDate,"dd/MM/YYYY"),""),t.xp6(2),t.Q6J("routerLink",t.VKq(8,M,"/authors/"+e.authorId)),t.xp6(1),t.hij("\u10d0\u10d5\u10e2\u10dd\u10e0\u10d8: ",e.story.author,"")}}function I(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"section",1),t.TgZ(1,"h2",2),t._uU(2),t.qZA(),t.TgZ(3,"form",3,4),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(5,"div",5),t.TgZ(6,"label",6),t._uU(7,"\u10e1\u10d0\u10ee\u10d4\u10da\u10d8"),t.qZA(),t.TgZ(8,"input",7),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().story.name=i}),t.qZA(),t.qZA(),t.TgZ(9,"div",8),t.TgZ(10,"label",6),t._uU(11,"\u10db\u10dd\u10d9\u10da\u10d4 \u10d0\u10e6\u10ec\u10d4\u10e0\u10d0"),t.qZA(),t.TgZ(12,"input",9),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().story.description=i}),t.qZA(),t.qZA(),t.TgZ(13,"div",5),t.TgZ(14,"label",6),t._uU(15,"\u10e2\u10d4\u10e5\u10e1\u10e2\u10d8"),t.qZA(),t.TgZ(16,"textarea",10),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().story.content=i}),t.qZA(),t.qZA(),t.TgZ(17,"div",11),t.TgZ(18,"label",6),t._uU(19,"\u10d2\u10d0\u10db\u10dd\u10e5\u10d5\u10d4\u10e7\u10dc\u10d4\u10d1\u10d8\u10e1 \u10d7\u10d0\u10e0\u10d8\u10e6\u10d8"),t.qZA(),t.TgZ(20,"input",12),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().story.publishDate=i}),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"button",13),t._uU(23,"\u10e0\u10d4\u10d3\u10d0\u10e5\u10e2\u10d8\u10e0\u10d4\u10d1\u10d0"),t.qZA(),t.TgZ(24,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().reset()}),t._uU(25,"\u10d2\u10d0\u10e1\u10e3\u10e4\u10d7\u10d0\u10d5\u10d4\u10d1\u10d0"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(4),o=t.oxw();t.xp6(2),t.hij("\u10dc\u10d0\u10ec\u10d0\u10e0\u10db\u10dd\u10d4\u10d1\u10d8: ",o.baseName,""),t.xp6(6),t.Q6J("ngModel",o.story.name),t.xp6(4),t.Q6J("ngModel",o.story.description),t.xp6(4),t.Q6J("ngModel",o.story.content),t.xp6(4),t.Q6J("ngModel",o.story.publishDate),t.xp6(2),t.Q6J("disabled",e.invalid)}}const O=[{path:"",component:E},{path:":id",component:(()=>{class n{constructor(e,o,i){this.route=e,this.storyService=o,this.authorService=i}ngOnInit(){this.getStory()}getStory(){this.storyService.getStory(+this.route.snapshot.paramMap.get("id")).subscribe(e=>{this.story=e,this.authorService.getAuthorWithName(this.story.author).subscribe(o=>{this.authorId=o.id})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(m.I),t.Y36(D.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stories-detail"]],decls:1,vars:1,consts:[["class","container m-auto d-flex justify-content-center flex-column align-items-start","style","margin-top: 95px!important;",4,"ngIf"],[1,"container","m-auto","d-flex","justify-content-center","flex-column","align-items-start",2,"margin-top","95px!important"],[1,"mt-2"],[1,"mt-2",3,"routerLink"]],template:function(e,o){1&e&&t.YNc(0,q,10,10,"section",0),2&e&&t.Q6J("ngIf",o.story)},directives:[a.O5,p.yS],pipes:[a.uU],styles:["h2[_ngcontent-%COMP%]{font-size:34px}p[_ngcontent-%COMP%]{font-size:18px;width:80%}a[_ngcontent-%COMP%]{font-size:18px;text-decoration:none;color:#000;transition:.2s}a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#78c2ad}"]}),n})()},{path:"update/:id",component:(()=>{class n{constructor(e,o,i,u,Q){this.storyService=e,this.route=o,this.toastr=i,this.router=u,this.authorService=Q,this.story={name:"",description:"",content:"",publishDate:"",authorId:0}}ngOnInit(){this.getStory()}onSubmit(){this.storyService.updateStory(this.story,this.baseName).subscribe(()=>{this.router.navigate(["/stories/"+this.id]),this.toastr.success("\u10dc\u10d0\u10ec\u10d0\u10e0\u10db\u10dd\u10d4\u10d1\u10d8 \u10e0\u10d4\u10d3\u10d0\u10e5\u10e2\u10d8\u10e0\u10d4\u10d1\u10e3\u10da\u10d8\u10d0")})}reset(){this.story.name="",this.story.description="",this.story.content="",this.story.publishDate=""}getStory(){this.id=+this.route.snapshot.paramMap.get("id"),this.storyService.getStory(this.id).subscribe(e=>{this.story.name=e.name,this.story.description=e.description,this.story.content=e.content,this.story.publishDate=new Date(e.publishDate).toISOString().split("T")[0],this.baseName=this.story.name,this.authorService.getAuthorWithName(e.author).subscribe(o=>{this.story.authorId=o.id})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.I),t.Y36(p.gz),t.Y36(d._W),t.Y36(p.F0),t.Y36(D.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-story"]],decls:1,vars:1,consts:[["class","container","style","margin-top: 105px",4,"ngIf"],[1,"container",2,"margin-top","105px"],[1,"text-primary"],[1,"mt-3",3,"ngSubmit"],["authorAddForm","ngForm"],[1,"form-group"],[1,"form-label"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","my-3"],["type","text","name","description","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","content","id","","cols","30","rows","15",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","mt-3"],["type","date","name","publishDate","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-warning",3,"disabled"],["type","button",1,"btn","btn-info","mx-3",3,"click"]],template:function(e,o){1&e&&t.YNc(0,I,26,6,"section",0),2&e&&t.Q6J("ngIf",o.story&&o.baseName)},directives:[a.O5,c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On],styles:[""]}),n})(),canActivate:[s(8668).a]}];let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez,p.Bz.forChild(O)],p.Bz]}),n})();var Y=s(4466);let P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez,Y.m,w]]}),n})()}}]);